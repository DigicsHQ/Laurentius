<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSpy v2008 (http://www.altova.com) by XMLSpy 2007 Professional Ed., Installed for 5 users (with SMP from 2007-02-06 to 2008-02-07) (CIF VSRS) -->
<tns:MSHSetings xmlns:tns="http://msh.laurentius.si/pmode" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://msh.laurentius.si/pmode https://raw.githubusercontent.com/VsrsCif/Laurentius/master/Laurentius-libs/Laurentius-commons/src/main/resources/schemas/msh-settings.xsd">
	<tns:Services>
		<tns:Service id="DeliveryWithReceipt" serviceName="DeliveryWithReceipt" useSEDProperties="true">
			<tns:Initiator role="Sender"/>
			<tns:Executor role="Receiver"/>
			<tns:Action sendingRole="Sender" name="Delivery">
				<tns:Properties>
					<tns:Property name="originalSender" required="true"/>
					<tns:Property name="finalRecipient" required="true"/>
				</tns:Properties>
				<tns:PayloadProfiles maxSize="10000">
					<tns:PayloadProfile name="test" maxSize="10000" maxOccurs="1"/>
				</tns:PayloadProfiles>
			</tns:Action>
		</tns:Service>
		<tns:Service id="LegalDelivery_ZPP" serviceType="SVEV" serviceName="LegalDelivery_ZPP">
			<tns:Initiator role="Sender"/>
			<tns:Executor role="Receiver"/>
			<tns:Action sendingRole="Sender" name="DeliveryNotification">
				<tns:PayloadProfiles maxSize="10000">
					<tns:PayloadProfile name="DeliveryNotification" minOccurs="1" maxOccurs="1" MIME="application/pdf"/>
					<tns:PayloadProfile name="EncryptedPayload" maxSize="10000" minOccurs="1" maxOccurs="999"/>
				</tns:PayloadProfiles>
			</tns:Action>
			<tns:Action sendingRole="Receiver" name="AdviceOfDelivery">
				<tns:PayloadProfiles maxSize="10000">
					<tns:PayloadProfile name="AdviceOfDelivery" minOccurs="1" maxOccurs="1" MIME="application/pdf"/>
				</tns:PayloadProfiles>
			</tns:Action>
			<tns:Action sendingRole="Sender" name="EncryptedKey" after="DeliveryNotification, AdviceOfDelivery">
				<tns:PayloadProfiles maxSize="10000">
					<tns:PayloadProfile name="EncryptedKey" minOccurs="1" maxOccurs="1" MIME="application/xml"/>
				</tns:PayloadProfiles>
			</tns:Action>
			<tns:Action sendingRole="Sender" name="FictionNotification" after="DeliveryNotification">
				<tns:PayloadProfiles maxSize="10000">
					<tns:PayloadProfile name="FictionNotification" maxOccurs="1" MIME="application/pdf"/>
					<tns:PayloadProfile name="EncryptedKey" minOccurs="1" maxOccurs="1" MIME="application/xml"/>
				</tns:PayloadProfiles>
			</tns:Action>
		</tns:Service>
		
	</tns:Services>
	<tns:Parties>
		<tns:PartyIdentitySet id="test-laurentius" isLocalIdentity="true">
			<tns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:si-svev:name" valueSource="name"/>
			<tns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:si-svev:sed-box" valueSource="address"/>
			<tns:TransportProtocol id="defalut" isTwoWayProtocol="true">
				<tns:Address connectionTimeout="120000" receiveTimeout="180000" chunked="false">https://localhost:8443/laurentius/msh</tns:Address>
				<tns:TLS trustStoreName="def-truststore"/>
				<tns:SOAPVersion>1.2</tns:SOAPVersion>
			</tns:TransportProtocol>
			<tns:LocalPartySecurity signatureKeyAlias="test-laurentius" decryptionKeyAlias="test-laurentius" keystoreName="def-keystore"/>
			<tns:ExchangePartySecurity signatureCertAlias="test-laurentius" encryptionCertAlias="test-laurentius" trustoreName="def-keystore"/>
		</tns:PartyIdentitySet>
		<tns:PartyIdentitySet id="court-laurentius" domain="court-laurentius.si" isLocalIdentity="false">
			<tns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:si-svev:name" valueSource="name"/>
			<tns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:si-svev:sed-box" valueSource="address"/>
			<tns:TransportProtocol id="court-https" isTwoWayProtocol="true">
				<tns:Address connectionTimeout="120000" receiveTimeout="180000" chunked="false">https://b2g-test.sodisce.si/laurentius/msh</tns:Address>
				<tns:TLS keyAlias="test-tls" keyStoreName="tls-store" trustStoreName="def-truststore"/>
				<tns:SOAPVersion>1.2</tns:SOAPVersion>
			</tns:TransportProtocol>
			<tns:ExchangePartySecurity signatureCertAlias="court-laurentius" trustoreName="def-truststore"/>
		</tns:PartyIdentitySet>
	</tns:Parties>
	<tns:SecurityPolicies>
		
		<tns:Security WSSVersion="1.1" id="sign_sha256">
			<tns:X509>
				<tns:Signature hashFunction="http://www.w3.org/2001/04/xmlenc#sha256" algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256">
					<tns:Reference allAttachments="true">
						<tns:Elements>
							<tns:XPath xpath="env:Header/eb3:Messaging">
								<tns:Namespace prefix="eb3" namespace="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/"/>
								<tns:Namespace prefix="env" namespace="http://www.w3.org/2003/05/soap-envelope"/>
							</tns:XPath>
						</tns:Elements>
					</tns:Reference>
				</tns:Signature>
			</tns:X509>
		</tns:Security>
	</tns:SecurityPolicies>
	<tns:ReceptionAwarenessPatterns>
		<tns:ReceptionAwareness id="AS4ReceiptResponse" replyPattern="response" receiptType="AS4Receipt">
			<tns:Retry period="5678" maxRetries="3" multiplyPeriod="3"/>
			<tns:DuplicateDetection windowPeriode="P1Y"/>
		</tns:ReceptionAwareness>		
	</tns:ReceptionAwarenessPatterns>
	<tns:PMode id="DeliveryWithReceipt">
		<tns:ServiceIdRef>DeliveryWithReceipt</tns:ServiceIdRef>
		<tns:LocalPartyInfo partyIdentitySetIdRef="test-laurentius">
			<tns:Role>Sender</tns:Role>
			<tns:Role>Receiver</tns:Role>
		</tns:LocalPartyInfo>
		<tns:ExchangeParties>
			<tns:PartyInfo partyDefTransportIdRef="defalut" partyIdentitySetIdRef="test-laurentius">
				<tns:Role>Sender</tns:Role>
				<tns:Role>Receiver</tns:Role>
			</tns:PartyInfo>
			<tns:PartyInfo partyDefTransportIdRef="court-https" partyIdentitySetIdRef="court-laurentius">
				<tns:Role>Sender</tns:Role>
				<tns:Role>Receiver</tns:Role>
			</tns:PartyInfo>
		</tns:ExchangeParties>
		<tns:MEP>
			<tns:MEPType>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/oneWay</tns:MEPType>
			<tns:MEPChannelBinding>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/push</tns:MEPChannelBinding>
			<tns:MEPInitiatorRole>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</tns:MEPInitiatorRole>
			<tns:Leg>
				<tns:MPC>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultMPC</tns:MPC>
				<tns:Transport>
					<tns:ForeChannel securityIdRef="sign_sha256" action="Delivery">
						<tns:ReceptionAwareness raPatternIdRef="AS4ReceiptResponse-one"/>
					</tns:ForeChannel>
					<tns:BackChannel securityIdRef="sign_sha256"/>
				</tns:Transport>
			</tns:Leg>
		</tns:MEP>
	</tns:PMode>
	
	<tns:PMode id="ZPP-legal">
		<tns:ServiceIdRef>LegalDelivery_ZPP</tns:ServiceIdRef>
		<tns:InPlugins>
			<tns:Plugin>java:global/plugin-zpp/ZPPInInterceptor!si.laurentius.commons.interfaces.SoapInterceptorInterface</tns:Plugin>
		</tns:InPlugins>
		<tns:OutPlugins>
			<tns:Plugin>java:global/plugin-zpp/ZPPOutInterceptor!si.laurentius.commons.interfaces.SoapInterceptorInterface</tns:Plugin>
		</tns:OutPlugins>
		<tns:LocalPartyInfo partyIdentitySetIdRef="test-laurentius" partyDefTransportIdRef="defalut">
			<tns:Role>Sender</tns:Role>
			<tns:Role>Receiver</tns:Role>
		</tns:LocalPartyInfo>
		<tns:ExchangeParties>
			<tns:PartyInfo partyDefTransportIdRef="defalut" partyIdentitySetIdRef="test-laurentius">
				<tns:Role>Sender</tns:Role>
				<tns:Role>Receiver</tns:Role>
			</tns:PartyInfo>
			<tns:PartyInfo partyDefTransportIdRef="court-https" partyIdentitySetIdRef="court-laurentius">
				<tns:Role>Sender</tns:Role>
				<tns:Role>Receiver</tns:Role>
			</tns:PartyInfo>		


		</tns:ExchangeParties>
		<tns:MEP>
			<tns:MEPType>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/oneWay</tns:MEPType>
			<tns:MEPChannelBinding>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/push</tns:MEPChannelBinding>
			<tns:MEPInitiatorRole>Sender</tns:MEPInitiatorRole>
			<tns:Leg>
				<tns:MPC>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultMPC</tns:MPC>
				<tns:Transport>
					<tns:ForeChannel securityIdRef="sign_sha256" action="DeliveryNotification">
						<tns:ReceptionAwareness raPatternIdRef="AS4ReceiptResponse"/>
					</tns:ForeChannel>
					<tns:BackChannel securityIdRef="sign_sha256"/>
				</tns:Transport>
			</tns:Leg>
		</tns:MEP>
		<tns:MEP>
			<tns:MEPType>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/twoWay</tns:MEPType>
			<tns:MEPChannelBinding>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/sync</tns:MEPChannelBinding>
			<tns:MEPInitiatorRole>Receiver</tns:MEPInitiatorRole>
			<tns:Leg>
				<tns:MPC>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultMPC</tns:MPC>
				<tns:Transport>
					<tns:ForeChannel securityIdRef="sign_sha256" action="AdviceOfDelivery">
						<tns:ReceptionAwareness raPatternIdRef="AS4ReceiptResponse"/>
					</tns:ForeChannel>
					<tns:BackChannel securityIdRef="sign_sha256" action="EncryptedKey" />
				</tns:Transport>
			</tns:Leg>
		</tns:MEP>
		<tns:MEP>
			<tns:MEPType>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/twoWay</tns:MEPType>
			<tns:MEPChannelBinding>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/sync</tns:MEPChannelBinding>
			<tns:MEPInitiatorRole>Sender</tns:MEPInitiatorRole>
			<tns:Leg>
				<tns:MPC>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultMPC</tns:MPC>
				<tns:Transport>
					<tns:ForeChannel securityIdRef="sign_sha256" action="FictionNotification">
						<tns:ReceptionAwareness raPatternIdRef="AS4ReceiptResponse"/>
					</tns:ForeChannel>
				</tns:Transport>
			</tns:Leg>
		</tns:MEP>
	</tns:PMode>
</tns:MSHSetings>
